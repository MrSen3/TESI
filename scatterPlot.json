{ "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "data": {"name": "myData"},
  "name": "Grafico a linee con marcatori di punti",
  "title":{
    "text":"Line chart with point markers",
    "anchor": "middle",
    "orient": "top",
    "offset": 15,
    "fontSize": 20,
    "fontWeight": "normal",
    "color": "#013378"

  },

  "id": "1",
  "width": "500",
  "height": "400",
  "transform": [
    {
      "aggregate": [{"op": "count", "as": "num_pubblicazioni"}],
      "groupby": ["year"]
    }
  ],
  "layer": [{
    "selection": {
      "brush": {
        "type": "interval",
        "encodings": ["x"]
      }
    },
    "mark": {
      "type": "line",
      "point": true,
      "opacity": 0.8,
      "stroke": "black",
      "strokeWidth": 0.5
    },
    "encoding": {
      "x": {
        "field": "year",
        "type": "ordinal",
        "sort": null,
        "axis": {
          "title": "Anno",
          "labels": true,
          "labelAngle": 0,
          "minExtent": 20

        }
      },
      "y": {
        "field": "num_pubblicazioni",
        "type": "quantitative",
        "axis": {
          "title": "Numero di pubblicazioni"
        }
      },
      "opacity": {
        "condition": {
          "selection": "brush", "value": 1
        },
        "value": 0.7
      },
      "tooltip": [
        {
          "field": "num_pubblicazioni",
          "type": "quantitative",
          "title": "Quantita'"
        },
        {
          "field": "year",
          "type": "nominal",
          "title": "Anno"
        }
      ]
    }
  },
    {
      "transform": [{
        "filter": {"selection": "brush"}
      }],

      "mark": "rule",
      "encoding": {
        "y": {
          "aggregate": "mean",
          "field": "num_pubblicazioni",
          "type": "quantitative"
        },
        "color": {
          "value": "firebrick"
        },
        "size": {
          "value": 3
        }
      }
    }
  ]
}